<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–∏–¥–∏–∫ ‚Äî AI-–ø—Ä–æ–≤–æ–¥–Ω–∏–∫ –ø–æ –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #3b82f6;
            --primary-purple: #8b5cf6;
            --dark-blue: #1d4ed8;
            --dark-purple: #7c3aed;
            --light-blue: #bfdbfe;
            --light-purple: #ddd6fe;
            --bg-light: #f0f9ff;
            --text-dark: #1e293b;
            --text-light: #64748b;
            --white: #ffffff;
            --shadow: 0 10px 15px -3px rgba(139, 92, 246, 0.3);
            --shadow-lg: 0 20px 25px -5px rgba(139, 92, 246, 0.4);
            --gradient-primary: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-purple) 100%);
            --gradient-dark: linear-gradient(135deg, var(--dark-blue) 0%, var(--dark-purple) 100%);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--bg-light);
            overflow-x: hidden;
            min-height: 100vh;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(139, 92, 246, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(139, 92, 246, 0); }
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: var(--gradient-dark);
            background-size: 200% 200%;
            animation: gradientShift 4s ease infinite;
            padding: 1.5rem 2rem;
            box-shadow: var(--shadow-lg);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--light-blue) 0%, var(--light-purple) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        nav button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: var(--white);
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-left: 0.5rem;
            backdrop-filter: blur(10px);
        }

        nav button:hover, nav button.active {
            background: var(--gradient-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .screen {
            display: none;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            animation: fadeIn 0.5s ease-out;
            flex: 1;
        }

        .screen.active {
            display: block;
        }

        .hero {
            text-align: center;
            padding: 4rem 2rem;
            background: var(--gradient-primary);
            background-size: 400% 400%;
            animation: gradientShift 3s ease infinite;
            color: var(--white);
            border-radius: 30px;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .generator {
            background: linear-gradient(135deg, var(--white) 0%, var(--light-blue) 100%);
            padding: 3rem;
            border-radius: 25px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 3rem;
            border: 3px solid rgba(139, 92, 246, 0.3);
        }

        /* ========== –ù–û–í–´–ï –°–¢–ò–õ–ò –ò–ó –°–¢–ê–†–û–ì–û –ö–û–î–ê ========== */
        
        /* AI-–≥–∏–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å */
        .ai-guide {
            display: none;
        }

        .chat-container {
            background: linear-gradient(135deg, var(--white) 0%, var(--light-blue) 100%);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 2rem;
            height: 600px;
            display: flex;
            flex-direction: column;
            border: 3px solid rgba(139, 92, 246, 0.3);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 1.5rem;
            padding-right: 1rem;
        }

        .message {
            margin-bottom: 1.5rem;
            padding: 1rem;
            border-radius: 15px;
            max-width: 80%;
        }

        .user-message {
            background: rgba(59, 130, 246, 0.2);
            margin-left: auto;
            border-bottom-right-radius: 5px;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .ai-message {
            background: rgba(255, 255, 255, 0.8);
            margin-right: auto;
            border-bottom-left-radius: 5px;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .message.loading {
            background: rgba(255, 255, 255, 0.6);
            color: var(--text-light);
            font-style: italic;
        }

        .chat-input-container {
            display: flex;
            gap: 1rem;
        }

        .chat-input {
            flex: 1;
            padding: 1rem;
            border: 2px solid var(--light-purple);
            border-radius: 12px;
            background: var(--white);
            color: var(--text-dark);
            font-family: inherit;
            font-size: 1rem;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--primary-purple);
            box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.3);
        }

        .send-btn {
            background: var(--gradient-primary);
            color: var(--white);
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .send-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .send-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
            background: var(--gradient-dark);
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: linear-gradient(135deg, var(--white) 0%, var(--light-blue) 100%);
            border-radius: 20px;
            padding: 2rem;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 3px solid rgba(139, 92, 246, 0.3);
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: var(--primary-purple);
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .close-modal:hover {
            background: rgba(139, 92, 246, 0.1);
        }

        /* –û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏ */
        .reviews-section {
            margin-top: 2rem;
        }

        .review {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(191, 219, 254, 0.3) 100%);
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .review-author {
            font-weight: 600;
            color: var(--dark-purple);
        }

        .review-rating {
            color: #ffd700;
            font-size: 1.2rem;
        }

        .review-text {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .add-review {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(221, 214, 254, 0.3) 100%);
            border-radius: 15px;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .review-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .review-input, .review-textarea {
            padding: 1rem;
            border: 2px solid var(--light-purple);
            border-radius: 10px;
            background: var(--white);
            color: var(--text-dark);
            font-family: inherit;
            font-size: 1rem;
        }

        .review-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .review-input:focus, .review-textarea:focus {
            outline: none;
            border-color: var(--primary-purple);
            box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.3);
        }

        .rating-select {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .star {
            font-size: 1.5rem;
            color: #ccc;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star.active {
            color: #ffd700;
        }

        .city-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
        }

        .rating-stars {
            color: #ffd700;
            font-size: 1.2rem;
        }

        .rating-value {
            font-weight: 600;
            color: #ffd700;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ –≥–æ—Ä–æ–¥–æ–≤ —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ */
        .city-card {
            background: linear-gradient(135deg, var(--white) 0%, var(--light-blue) 100%);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            position: relative;
        }

        .city-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-purple);
        }

        .city-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }

        .city-name {
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .city-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .city-description {
            color: var(--text-light);
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }

        .attractions-list {
            background: linear-gradient(135deg, rgba(191, 219, 254, 0.3) 0%, rgba(221, 214, 254, 0.3) 100%);
            padding: 1rem;
            border-radius: 10px;
            margin-top: 1rem;
        }

        .attraction-item {
            padding: 0.5rem 0;
            color: var(--text-dark);
            border-bottom: 1px solid rgba(139, 92, 246, 0.1);
        }

        .attraction-item:last-child {
            border-bottom: none;
        }

        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ API */
        .config-section {
            background: linear-gradient(135deg, var(--white) 0%, var(--light-blue) 100%);
            padding: 2rem;
            border-radius: 20px;
            margin: 2rem auto;
            max-width: 600px;
            border: 3px solid rgba(139, 92, 246, 0.3);
        }

        .config-info {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 10px;
            font-size: 0.9rem;
        }

        .file-input {
            margin-top: 1rem;
            padding: 0.5rem;
            border: 2px solid var(--light-purple);
            border-radius: 8px;
            background: var(--white);
            width: 100%;
        }

        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
        .btn {
            background: var(--gradient-primary);
            color: var(--white);
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
            background: var(--gradient-dark);
        }

        .btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--primary-purple);
            color: var(--primary-purple);
        }

        .btn.secondary:hover {
            background: rgba(139, 92, 246, 0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        select, input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--light-purple);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
            background: var(--white);
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-purple);
            box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.3);
        }

        .route-result {
            margin-top: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, var(--light-blue) 0%, var(--light-purple) 100%);
            border-radius: 20px;
            display: none;
            border: 3px solid rgba(139, 92, 246, 0.3);
        }

        .route-result.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .city-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .map-container {
            background: linear-gradient(135deg, var(--white) 0%, var(--light-blue) 100%);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            border: 3px solid var(--primary-purple);
        }

        .map-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .stat-box {
            background: var(--gradient-primary);
            color: var(--white);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: all 0.3s;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .stat-box:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .back-btn {
            background: var(--gradient-primary);
            color: var(--white);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: var(--gradient-dark);
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
                justify-content: center;
            }
            
            nav button {
                margin: 0;
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }
            
            .city-list {
                grid-template-columns: 1fr;
            }
            
            .chat-container {
                height: 500px;
                padding: 1rem;
            }
            
            .message {
                max-width: 90%;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="header-content">
                <div class="logo">üó∫Ô∏è –ì–∏–¥–∏–∫</div>
                <nav>
                    <button onclick="showScreen('home')" class="active">–ì–ª–∞–≤–Ω–∞—è</button>
                    <button onclick="showScreen('generator')">–ú–∞—Ä—à—Ä—É—Ç—ã</button>
                    <button onclick="showScreen('cities')">–ì–æ—Ä–æ–¥–∞</button>
                    <button onclick="showScreen('map')">–ö–∞—Ä—Ç–∞</button>
                    <button onclick="showScreen('ai-guide')">AI-–≥–∏–¥</button>
                    <button onclick="showScreen('settings')">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </nav>
            </div>
        </header>

        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="home" class="screen active">
            <div class="hero">
                <h1>–ì–∏–¥–∏–∫ ‚Äî AI-–ø—Ä–æ–≤–æ–¥–Ω–∏–∫ –ø–æ –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏</h1>
                <p>–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç —Å–æ–∑–¥–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-number">5</div>
                    <div>–ì–æ—Ä–æ–¥–æ–≤ —Å AI-–≥–∏–¥–æ–º</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number">50+</div>
                    <div>–î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number">100+</div>
                    <div>–û—Ç–∑—ã–≤–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number">4.7‚òÖ</div>
                    <div>–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div>
                </div>
            </div>
        </div>

        <!-- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ -->
        <div id="generator" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="generator">
                <h2 style="text-align: center; margin-bottom: 2rem; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                    ü§ñ AI-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤
                </h2>
                <form id="routeForm">
                    <div class="form-group">
                        <label>üèôÔ∏è –ì–æ—Ä–æ–¥</label>
                        <select id="city" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥...</option>
                            <option value="ivanovo">–ò–≤–∞–Ω–æ–≤–æ</option>
                            <option value="shuya">–®—É—è</option>
                            <option value="kineshma">–ö–∏–Ω–µ—à–º–∞</option>
                            <option value="ples">–ü–ª—ë—Å</option>
                            <option value="palekh">–ü–∞–ª–µ—Ö</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>üéØ –ò–Ω—Ç–µ—Ä–µ—Å—ã</label>
                        <select id="interests" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
                            <option value="history">–ò—Å—Ç–æ—Ä–∏—è –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</option>
                            <option value="nature">–ü—Ä–∏—Ä–æ–¥–∞ –∏ –ø–∞—Ä–∫–∏</option>
                            <option value="culture">–ö—É–ª—å—Ç—É—Ä–∞ –∏ –º—É–∑–µ–∏</option>
                            <option value="religion">–•—Ä–∞–º—ã –∏ –º–æ–Ω–∞—Å—Ç—ã—Ä–∏</option>
                            <option value="gastronomy">–ï–¥–∞ –∏ –∫–∞—Ñ–µ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>‚è±Ô∏è –í—Ä–µ–º—è (—á–∞—Å—ã)</label>
                        <input type="number" id="time" min="1" max="12" value="3" required>
                    </div>
                    <div class="form-group">
                        <label>üí∞ –ë—é–¥–∂–µ—Ç (‚ÇΩ)</label>
                        <select id="budget" required>
                            <option value="free">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</option>
                            <option value="low">–î–æ 500‚ÇΩ</option>
                            <option value="medium">500-2000‚ÇΩ</option>
                            <option value="high">–ë–æ–ª–µ–µ 2000‚ÇΩ</option>
                        </select>
                    </div>
                    <button type="submit" class="btn">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç ‚ú®</button>
                </form>
                
                <div id="routeResult" class="route-result">
                    <h3>–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç:</h3>
                    <div id="routeContent"></div>
                </div>
            </div>
        </div>

        <!-- –ì–æ—Ä–æ–¥–∞ —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ –∏ –æ—Ç–∑—ã–≤–∞–º–∏ -->
        <div id="cities" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <h2 style="text-align: center; margin-bottom: 2rem; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                üèõÔ∏è –ì–æ—Ä–æ–¥–∞ –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏
            </h2>
            <div class="city-list" id="citiesGrid">
                <!-- –ì–æ—Ä–æ–¥–∞ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>

        <!-- –ö–∞—Ä—Ç–∞ -->
        <div id="map" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <h2 style="text-align: center; margin-bottom: 2rem; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                üó∫Ô∏è –ö–∞—Ä—Ç–∞ –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏
            </h2>
            <div class="map-container">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Ivanovo_Oblast_map.svg/1200px-Ivanovo_Oblast_map.svg.png" 
                     alt="–ö–∞—Ä—Ç–∞ –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏" 
                     class="map-image">
            </div>
        </div>

        <!-- AI-–≥–∏–¥ (–Ω–æ–≤–∞—è —Ñ–∏—á–∞) -->
        <div id="ai-guide" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <h2 style="text-align: center; margin-bottom: 2rem; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                ü§ñ AI-–≥–∏–¥ –ø–æ –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏
            </h2>
            
            <div class="config-section" id="apiConfigSection" style="display: none;">
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ API:</h3>
                <div id="configInfo"></div>
                <div class="api-status" id="apiStatus"></div>
            </div>
            
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="message ai-message">
                        –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –≤–∞—à AI-–≥–∏–¥ –ø–æ –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏. –°–ø—Ä–æ—Å–∏—Ç–µ –º–µ–Ω—è –æ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è—Ö, –º–∞—Ä—à—Ä—É—Ç–∞—Ö, –∏—Å—Ç–æ—Ä–∏–∏ –∏–ª–∏ –∫—É–ª—å—Ç—É—Ä–µ —Ä–µ–≥–∏–æ–Ω–∞.
                        <br><br>
                        <strong>–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤:</strong>
                        <br>‚Ä¢ "–ö–∞–∫–∏–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ü–ª—ë—Å–µ?"
                        <br>‚Ä¢ "–ö–∞–∫ –¥–æ–±—Ä–∞—Ç—å—Å—è –∏–∑ –ò–≤–∞–Ω–æ–≤–æ –≤ –ü–∞–ª–µ—Ö?"
                        <br>‚Ä¢ "–ì–¥–µ –ª—É—á—à–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ 2 –¥–Ω—è –≤ –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏?"
                        <br>‚Ä¢ "–†–∞—Å—Å–∫–∞–∂–∏ –æ–± –∏—Å—Ç–æ—Ä–∏–∏ —Ç–µ–∫—Å—Ç–∏–ª—å–Ω–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–≥–∏–æ–Ω–∞"
                    </div>
                </div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="chatInput" placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏..." onkeypress="handleKeyPress(event)">
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
            
            <div class="config-section" style="margin-top: 2rem;">
                <h3>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API:</h3>
                <p style="color: var(--text-light); margin-bottom: 1rem;">
                    –î–ª—è —Ä–∞–±–æ—Ç—ã AI-–≥–∏–¥–∞ –Ω—É–∂–µ–Ω API –∫–ª—é—á. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª settings.txt —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
                    <br><code>OPENROUTER_API_KEY=–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å</code>
                </p>
                <input type="file" id="configFile" accept=".txt" class="file-input" onchange="loadConfigFile(event)">
            </div>
        </div>

        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div id="settings" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <h2 style="text-align: center; margin-bottom: 2rem; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            </h2>
            
            <div class="config-section">
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ AI-–≥–∏–¥–∞</h3>
                <div id="currentConfig"></div>
                
                <div style="margin-top: 1rem;">
                    <label>–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞:</label>
                    <input type="file" id="settingsFile" accept=".txt" class="file-input" onchange="loadSettingsFile(event)">
                </div>
                
                <div style="margin-top: 2rem;">
                    <h4>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</h4>
                    <button onclick="testApiConnection()" class="btn secondary" style="margin-right: 1rem;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</button>
                    <span id="connectionStatus"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤ -->
    <div class="modal" id="reviewModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">√ó</button>
            <div id="modalContent">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let apiConfig = {
            OPENROUTER_API_KEY: '',
            MODEL: 'deepseek/deepseek-chat-v3-0324',
            API_URL: 'https://openrouter.ai/api/v1/chat/completions'
        };

        // –î–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–æ–≤ (–∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞)
        const citiesData = {
            "–ò–≤–∞–Ω–æ–≤–æ": {
                icon: "üè≠",
                description: "–°—Ç–æ–ª–∏—Ü–∞ —Ç–µ–∫—Å—Ç–∏–ª—å–Ω–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ –†–æ—Å—Å–∏–∏, –∏–∑–≤–µ—Å—Ç–Ω–∞—è —Å–≤–æ–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–∏–∑–º–∞ –∏ –±–æ–≥–∞—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π. –ù–∞—Å–µ–ª–µ–Ω–∏–µ: ~400,000 —á–µ–ª–æ–≤–µ–∫. –û—Å–Ω–æ–≤–∞–Ω –≤ 1871 –≥–æ–¥—É.",
                attractions: [
                    "–©—É–¥—Ä–æ–≤—Å–∫–∞—è –ø–∞–ª–∞—Ç–∫–∞ - –¥—Ä–µ–≤–Ω–µ–π—à–µ–µ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –∑–¥–∞–Ω–∏–µ",
                    "–ú—É–∑–µ–π –∏–≤–∞–Ω–æ–≤—Å–∫–æ–≥–æ —Å–∏—Ç—Ü–∞",
                    "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∞–Ω—Å–∞–º–±–ª—å –ø–ª–æ—â–∞–¥–∏ –†–µ–≤–æ–ª—é—Ü–∏–∏",
                    "–°–≤—è—Ç–æ-–í–≤–µ–¥–µ–Ω—Å–∫–∏–π –∂–µ–Ω—Å–∫–∏–π –º–æ–Ω–∞—Å—Ç—ã—Ä—å",
                    "–ò–≤–∞–Ω–æ–≤—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —Ü–∏—Ä–∫",
                    "–ü–∞—Ä–∫ –∏–º. –°—Ç–µ–ø–∞–Ω–æ–≤–∞",
                    "–ú—É–∑–µ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –∏—Å–∫—É—Å—Å—Ç–≤–∞"
                ],
                rating: 4.2,
                reviews: [
                    { author: "–ê–Ω–Ω–∞", rating: 5, text: "–ü—Ä–µ–∫—Ä–∞—Å–Ω—ã–π –≥–æ—Ä–æ–¥ —Å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π! –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è –º—É–∑–µ–π —Å–∏—Ç—Ü–∞." },
                    { author: "–î–º–∏—Ç—Ä–∏–π", rating: 4, text: "–ú–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –º–µ—Å—Ç, –Ω–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤." }
                ]
            },
            "–®—É—è": {
                icon: "üïç",
                description: "–û–¥–∏–Ω –∏–∑ –¥—Ä–µ–≤–Ω–µ–π—à–∏—Ö –≥–æ—Ä–æ–¥–æ–≤ –æ–±–ª–∞—Å—Ç–∏, –∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–≤–æ–µ–π –∫–æ–ª–æ–∫–æ–ª—å–Ω–µ–π –∏ –º—ã–ª–æ–≤–∞—Ä–µ–Ω–Ω–æ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç—å—é. –ù–∞—Å–µ–ª–µ–Ω–∏–µ: ~55,000 —á–µ–ª–æ–≤–µ–∫. –ü–µ—Ä–≤–æ–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ 1393 –≥–æ–¥—É.",
                attractions: [
                    "–ö–æ–ª–æ–∫–æ–ª—å–Ω—è –í–æ—Å–∫—Ä–µ—Å–µ–Ω—Å–∫–æ–≥–æ —Å–æ–±–æ—Ä–∞ (106 –º–µ—Ç—Ä–æ–≤)",
                    "–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ-–∫—Ä–∞–µ–≤–µ–¥—á–µ—Å–∫–∏–π –º—É–∑–µ–π",
                    "–ú—É–∑–µ–π –º—ã–ª–∞",
                    "–ì–æ—Ä–æ–¥—Å–∫–æ–π –ø–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã –∏ –æ—Ç–¥—ã—Ö–∞",
                    "–¶–µ—Ä–∫–æ–≤—å –ü–µ—Ç—Ä–∞ –∏ –ü–∞–≤–ª–∞",
                    "–®—É–π—Å–∫–∏–π –∏—Å—Ç–æ—Ä–∏–∫–æ-—Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º—É–∑–µ–π",
                    "–ü–∞–º—è—Ç–Ω–∏–∫ –º—ã–ª—É"
                ],
                rating: 4.1,
                reviews: [
                    { author: "–ï–ª–µ–Ω–∞", rating: 5, text: "–û—á–µ–Ω—å –∫–æ–ª–æ—Ä–∏—Ç–Ω—ã–π –≥–æ—Ä–æ–¥! –ú—É–∑–µ–π –º—ã–ª–∞ - must visit!" },
                    { author: "–ê–ª–µ–∫—Å–µ–π", rating: 3, text: "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –Ω–æ –º–∞–ª–æ –∫–∞—Ñ–µ –∏ –º–µ—Å—Ç –¥–ª—è –æ—Ç–¥—ã—Ö–∞." }
                ]
            },
            "–ö–∏–Ω–µ—à–º–∞": {
                icon: "‚õµ",
                description: "–í—Ç–æ—Ä–æ–π –ø–æ –≤–µ–ª–∏—á–∏–Ω–µ –≥–æ—Ä–æ–¥ –æ–±–ª–∞—Å—Ç–∏ —Å –±–æ–≥–∞—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π –∏ –∫—Ä–∞—Å–∏–≤–æ–π –≤–æ–ª–∂—Å–∫–æ–π –Ω–∞–±–µ—Ä–µ–∂–Ω–æ–π. –ù–∞—Å–µ–ª–µ–Ω–∏–µ: ~80,000 —á–µ–ª–æ–≤–µ–∫. –£–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è —Å 1429 –≥–æ–¥–∞.",
                attractions: [
                    "–í–æ–ª–∂—Å–∫–∏–π –±—É–ª—å–≤–∞—Ä –∏ –±–µ—Å–µ–¥–∫–∞ –û—Å—Ç—Ä–æ–≤—Å–∫–æ–≥–æ",
                    "–ö–∏–Ω–µ—à–µ–º—Å–∫–∏–π –¥—Ä–∞–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ–∞—Ç—Ä",
                    "–ú—É–∑–µ–π –≤–∞–ª–µ–Ω–æ–∫",
                    "–¢—Ä–æ–∏—Ü–∫–æ-–£—Å–ø–µ–Ω—Å–∫–∏–π —Å–æ–±–æ—Ä",
                    "–ü–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã –∏ –æ—Ç–¥—ã—Ö–∞ –∏–º. 35-–ª–µ—Ç–∏—è –ü–æ–±–µ–¥—ã",
                    "–ö—Ä–∞—Å–Ω—ã–µ –∏ –ë–µ–ª—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Ä—è–¥—ã",
                    "–ú—É–∑–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –ö–∏–Ω–µ—à–º—ã"
                ],
                rating: 4.0,
                reviews: [
                    { author: "–ú–∏—Ö–∞–∏–ª", rating: 4, text: "–£—é—Ç–Ω—ã–π –≥–æ—Ä–æ–¥ —Å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π. –ù–∞–±–µ—Ä–µ–∂–Ω–∞—è - –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∑–∫–∞!" }
                ]
            },
            "–ü–ª—ë—Å": {
                icon: "üé®",
                description: "–ñ–∏–≤–æ–ø–∏—Å–Ω—ã–π –≥–æ—Ä–æ–¥ –Ω–∞ –í–æ–ª–≥–µ, –≤–¥–æ—Ö–Ω–æ–≤–ª—è–≤—à–∏–π –º–Ω–æ–≥–∏—Ö —Ä—É—Å—Å–∫–∏—Ö —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤, –≤–∫–ª—é—á–∞—è –õ–µ–≤–∏—Ç–∞–Ω–∞. –ù–∞—Å–µ–ª–µ–Ω–∏–µ: ~2,000 —á–µ–ª–æ–≤–µ–∫. –û—Å–Ω–æ–≤–∞–Ω –≤ 1410 –≥–æ–¥—É –∫–∞–∫ –∫—Ä–µ–ø–æ—Å—Ç—å.",
                attractions: [
                    "–í–æ–ª–∂—Å–∫–∞—è –Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è –∏ –°–æ–±–æ—Ä–Ω–∞—è –≥–æ—Ä–∞",
                    "–î–æ–º-–º—É–∑–µ–π –ò—Å–∞–∞–∫–∞ –õ–µ–≤–∏—Ç–∞–Ω–∞",
                    "–ú—É–∑–µ–π –ø–µ–π–∑–∞–∂–∞",
                    "–£—Å–ø–µ–Ω—Å–∫–∏–π —Å–æ–±–æ—Ä XVII –≤–µ–∫–∞",
                    "–°–º–æ—Ç—Ä–æ–≤—ã–µ –ø–ª–æ—â–∞–¥–∫–∏ –Ω–∞ –í–æ–ª–≥—É",
                    "–¶–µ—Ä–∫–æ–≤—å –í–æ—Å–∫—Ä–µ—Å–µ–Ω–∏—è –•—Ä–∏—Å—Ç–æ–≤–∞",
                    "–ü–∞–º—è—Ç–Ω–∏–∫ –∫–æ—à–∫–µ"
                ],
                rating: 4.8,
                reviews: [
                    { author: "–û–ª—å–≥–∞", rating: 5, text: "–ù–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –∫—Ä–∞—Å–∏–≤–æ–µ –º–µ—Å—Ç–æ! –í–æ–∑–¥—É—Ö —á–∏—Å—Ç—ã–π, –≤–∏–¥—ã –∑–∞–≤–æ—Ä–∞–∂–∏–≤–∞—é—â–∏–µ." },
                    { author: "–°–µ—Ä–≥–µ–π", rating: 5, text: "–ò–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞ –æ—Ç –≥–æ—Ä–æ–¥—Å–∫–æ–π —Å—É–µ—Ç—ã. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω—É—Å—å!" }
                ]
            },
            "–ü–∞–ª–µ—Ö": {
                icon: "üñåÔ∏è",
                description: "–í—Å–µ–º–∏—Ä–Ω–æ –∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ü–µ–Ω—Ç—Ä –ª–∞–∫–æ–≤–æ–π –º–∏–Ω–∏–∞—Ç—é—Ä—ã –∏ –∏–∫–æ–Ω–æ–ø–∏—Å–∏, –≥–æ—Ä–æ–¥-–º—É–∑–µ–π –ø–æ–¥ –æ—Ç–∫—Ä—ã—Ç—ã–º –Ω–µ–±–æ–º. –ù–∞—Å–µ–ª–µ–Ω–∏–µ: ~5,000 —á–µ–ª–æ–≤–µ–∫. –ò–∑–≤–µ—Å—Ç–µ–Ω —Å XVII –≤–µ–∫–∞.",
                attractions: [
                    "–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π –º—É–∑–µ–π –ø–∞–ª–µ—Ö—Å–∫–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞",
                    "–î–æ–º-–º—É–∑–µ–π –ü.–î. –ö–æ—Ä–∏–Ω–∞",
                    "–ö—Ä–µ—Å—Ç–æ–≤–æ–∑–¥–≤–∏–∂–µ–Ω—Å–∫–∏–π —Ö—Ä–∞–º",
                    "–ú–∞—Å—Ç–µ—Ä—Å–∫–∏–µ –ø–∞–ª–µ—Ö—Å–∫–∏—Ö —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤",
                    "–°—É–≤–µ–Ω–∏—Ä–Ω—ã–µ –ª–∞–≤–∫–∏ —Å –∞–≤—Ç–æ—Ä—Å–∫–∏–º–∏ —Ä–∞–±–æ—Ç–∞–º–∏",
                    "–ú—É–∑–µ–π –∏–∫–æ–Ω—ã",
                    "–¶–µ—Ä–∫–æ–≤—å –ò–ª–∏–∏ –ü—Ä–æ—Ä–æ–∫–∞"
                ],
                rating: 4.6,
                reviews: [
                    { author: "–¢–∞—Ç—å—è–Ω–∞", rating: 5, text: "–í–æ–ª—à–µ–±–Ω–æ–µ –º–µ—Å—Ç–æ! –ò—Å–∫—É—Å—Å—Ç–≤–æ –ø–∞–ª–µ—Ö—Å–∫–æ–π –º–∏–Ω–∏–∞—Ç—é—Ä—ã –ø–æ—Ä–∞–∂–∞–µ—Ç." },
                    { author: "–í–∏–∫—Ç–æ—Ä", rating: 4, text: "–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –≥–æ—Ä–æ–¥ —Å –±–æ–≥–∞—Ç—ã–º–∏ —Ç—Ä–∞–¥–∏—Ü–∏—è–º–∏. –û–±—è–∑–∞—Ç–µ–ª–µ–Ω –∫ –ø–æ—Å–µ—â–µ–Ω–∏—é!" }
                ]
            }
        };

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            document.getElementById(screenId).classList.add('active');
            
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫—É —Å –Ω—É–∂–Ω—ã–º screenId
            const buttons = document.querySelectorAll('nav button');
            buttons.forEach(btn => {
                if (btn.onclick && btn.onclick.toString().includes(`'${screenId}'`)) {
                    btn.classList.add('active');
                }
            });
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
            if (screenId === 'cities') {
                renderCities();
            } else if (screenId === 'ai-guide') {
                updateConfigDisplay();
            } else if (screenId === 'settings') {
                showCurrentConfig();
            }
        }

        // ========== –§–ò–®–ö–ò –ò–ó –°–¢–ê–†–û–ì–û –ö–û–î–ê ==========

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        function loadConfigFile(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const content = e.target.result;
                    parseConfigFile(content);
                    updateConfigDisplay();
                    document.getElementById('apiStatus').innerHTML = '<span style="color: #10b981;">‚úì –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞</span>';
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
                    document.getElementById('apiConfigSection').style.display = 'block';
                } catch (error) {
                    document.getElementById('apiStatus').innerHTML = `<span style="color: #ef4444;">‚úó –û—à–∏–±–∫–∞: ${error.message}</span>`;
                }
            };
            reader.onerror = function() {
                document.getElementById('apiStatus').innerHTML = '<span style="color: #ef4444;">‚úó –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞</span>';
            };
            reader.readAsText(file);
        }

        function loadSettingsFile(event) {
            loadConfigFile(event);
            showCurrentConfig();
        }

        function parseConfigFile(content) {
            const lines = content.split('\n');
            const newConfig = {};

            lines.forEach(line => {
                line = line.trim();
                if (line && !line.startsWith('#')) {
                    const [key, value] = line.split('=').map(part => part.trim());
                    if (key && value !== undefined) {
                        newConfig[key] = value;
                    }
                }
            });

            apiConfig = { ...apiConfig, ...newConfig };
            localStorage.setItem('gidik_api_config', JSON.stringify(apiConfig));
        }

        function updateConfigDisplay() {
            const savedConfig = localStorage.getItem('gidik_api_config');
            if (savedConfig) {
                try {
                    apiConfig = { ...apiConfig, ...JSON.parse(savedConfig) };
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:', error);
                }
            }

            const configInfo = document.getElementById('configInfo');
            if (configInfo) {
                if (apiConfig.OPENROUTER_API_KEY && apiConfig.OPENROUTER_API_KEY.trim() !== '') {
                    const maskedKey = apiConfig.OPENROUTER_API_KEY.substring(0, 8) + '...' + 
                                     apiConfig.OPENROUTER_API_KEY.substring(apiConfig.OPENROUTER_API_KEY.length - 4);
                    configInfo.innerHTML = `
                        <div><strong>API Key:</strong> ${maskedKey}</div>
                        <div><strong>Model:</strong> ${apiConfig.MODEL}</div>
                        <div><strong>API URL:</strong> ${apiConfig.API_URL}</div>
                    `;
                } else {
                    configInfo.innerHTML = '<div style="color: #ef4444;">API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω</div>';
                }
            }
        }

        function showCurrentConfig() {
            updateConfigDisplay();
            const currentConfig = document.getElementById('currentConfig');
            if (currentConfig) {
                if (apiConfig.OPENROUTER_API_KEY && apiConfig.OPENROUTER_API_KEY.trim() !== '') {
                    const maskedKey = apiConfig.OPENROUTER_API_KEY.substring(0, 8) + '...' + 
                                     apiConfig.OPENROUTER_API_KEY.substring(apiConfig.OPENROUTER_API_KEY.length - 4);
                    currentConfig.innerHTML = `
                        <div class="config-info">
                            <div><strong>API Key:</strong> ${maskedKey}</div>
                            <div><strong>Model:</strong> ${apiConfig.MODEL}</div>
                            <div><strong>API URL:</strong> ${apiConfig.API_URL}</div>
                        </div>
                    `;
                } else {
                    currentConfig.innerHTML = '<div class="config-info" style="color: #ef4444;">API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫.</div>';
                }
            }
        }

        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è API
        async function testApiConnection() {
            if (!apiConfig.OPENROUTER_API_KEY) {
                document.getElementById('connectionStatus').innerHTML = '<span style="color: #ef4444;">‚úó API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω</span>';
                return;
            }

            document.getElementById('connectionStatus').innerHTML = '<span style="color: #f59e0b;">‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...</span>';

            try {
                const response = await fetch(apiConfig.API_URL, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiConfig.OPENROUTER_API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: apiConfig.MODEL,
                        messages: [{ role: "user", content: "–û—Ç–≤–µ—Ç—å –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º: '–≥–æ—Ç–æ–≤'" }],
                        max_tokens: 10
                    })
                });

                if (response.ok) {
                    document.getElementById('connectionStatus').innerHTML = '<span style="color: #10b981;">‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!</span>';
                } else {
                    const error = await response.json();
                    document.getElementById('connectionStatus').innerHTML = 
                        `<span style="color: #ef4444;">‚úó –û—à–∏–±–∫–∞: ${error.error?.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}</span>`;
                }
            } catch (error) {
                document.getElementById('connectionStatus').innerHTML = 
                    `<span style="color: #ef4444;">‚úó –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}</span>`;
            }
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–≤–µ–∑–¥ —Ä–µ–π—Ç–∏–Ω–≥–∞
        function renderStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            let stars = '';

            for (let i = 1; i <= 5; i++) {
                if (i <= fullStars) {
                    stars += '‚òÖ';
                } else if (i === fullStars + 1 && hasHalfStar) {
                    stars += '‚òÖ';
                } else {
                    stars += '‚òÜ';
                }
            }
            return stars;
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥–æ—Ä–æ–¥–æ–≤
        function renderCities() {
            const grid = document.getElementById('citiesGrid');
            if (!grid) return;

            grid.innerHTML = '';

            Object.entries(citiesData).forEach(([cityName, cityData]) => {
                const cityCard = document.createElement('div');
                cityCard.className = 'city-card';
                cityCard.innerHTML = `
                    <div class="city-header">
                        <div>
                            <div class="city-name">${cityName}</div>
                            <div class="city-rating">
                                <span class="rating-stars">${renderStars(cityData.rating)}</span>
                                <span class="rating-value">${cityData.rating}</span>
                            </div>
                        </div>
                        <div class="city-icon">${cityData.icon}</div>
                    </div>
                    <div class="city-description">
                        ${cityData.description}
                    </div>
                    <div class="attractions-list">
                        <strong>–û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</strong>
                        ${cityData.attractions.slice(0, 3).map(attr => 
                            `<div class="attraction-item">‚Ä¢ ${attr}</div>`
                        ).join('')}
                        ${cityData.attractions.length > 3 ? '<div class="attraction-item">...</div>' : ''}
                    </div>
                    <button class="btn" onclick="openReviews('${cityName}')" style="width: 100%; margin-top: 1.5rem;">
                        üìù –û—Ç–∑—ã–≤—ã –∏ –æ—Ü–µ–Ω–∫–∞
                    </button>
                `;
                grid.appendChild(cityCard);
            });
        }

        // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–∑—ã–≤–æ–≤
        function openReviews(cityName) {
            const cityData = citiesData[cityName];
            const modal = document.getElementById('reviewModal');
            const modalContent = document.getElementById('modalContent');

            modalContent.innerHTML = `
                <h2>${cityName} - –û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥</h2>
                <div class="city-rating" style="margin: 1rem 0; font-size: 1.2rem;">
                    <span class="rating-stars">${renderStars(cityData.rating)}</span>
                    <span class="rating-value">${cityData.rating} –∏–∑ 5 (${cityData.reviews.length} –æ—Ç–∑—ã–≤–æ–≤)</span>
                </div>

                <div style="margin: 1.5rem 0; padding: 1.5rem; background: linear-gradient(135deg, rgba(191, 219, 254, 0.2) 0%, rgba(221, 214, 254, 0.2) 100%); border-radius: 10px;">
                    <h3>–û –≥–æ—Ä–æ–¥–µ:</h3>
                    <p>${cityData.description}</p>
                    <h4 style="margin-top: 1rem;">–í—Å–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</h4>
                    <ul style="padding-left: 1.5rem;">
                        ${cityData.attractions.map(attr => `<li>${attr}</li>`).join('')}
                    </ul>
                </div>

                <div class="reviews-section">
                    <h3>–û—Ç–∑—ã–≤—ã –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π:</h3>
                    ${cityData.reviews.length > 0 ? 
                        cityData.reviews.map(review => `
                            <div class="review">
                                <div class="review-header">
                                    <span class="review-author">${review.author}</span>
                                    <span class="review-rating">${renderStars(review.rating)}</span>
                                </div>
                                <div class="review-text">${review.text}</div>
                            </div>
                        `).join('') : 
                        '<p style="color: var(--text-light);">–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>'
                    }
                </div>

                <div class="add-review">
                    <h3>–û—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–π –æ—Ç–∑—ã–≤</h3>
                    <div class="review-form">
                        <input type="text" class="review-input" id="reviewAuthor" placeholder="–í–∞—à–µ –∏–º—è">
                        <div class="rating-select" id="ratingSelect">
                            <span class="star" data-rating="1">‚òÜ</span>
                            <span class="star" data-rating="2">‚òÜ</span>
                            <span class="star" data-rating="3">‚òÜ</span>
                            <span class="star" data-rating="4">‚òÜ</span>
                            <span class="star" data-rating="5">‚òÜ</span>
                        </div>
                        <textarea class="review-textarea" id="reviewText" placeholder="–í–∞—à –æ—Ç–∑—ã–≤..."></textarea>
                        <button class="btn" onclick="submitReview('${cityName}')">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
                    </div>
                </div>
            `;

            initRatingSelect();
            modal.style.display = 'flex';
        }

        function initRatingSelect() {
            const stars = document.querySelectorAll('#ratingSelect .star');
            let selectedRating = 0;

            stars.forEach(star => {
                star.addEventListener('mouseover', () => {
                    const rating = parseInt(star.dataset.rating);
                    highlightStars(rating);
                });

                star.addEventListener('mouseout', () => {
                    highlightStars(selectedRating);
                });

                star.addEventListener('click', () => {
                    selectedRating = parseInt(star.dataset.rating);
                    highlightStars(selectedRating);
                });
            });

            function highlightStars(rating) {
                stars.forEach((star, index) => {
                    if (index < rating) {
                        star.textContent = '‚òÖ';
                        star.classList.add('active');
                    } else {
                        star.textContent = '‚òÜ';
                        star.classList.remove('active');
                    }
                });
            }
        }

        function submitReview(cityName) {
            const author = document.getElementById('reviewAuthor').value.trim();
            const text = document.getElementById('reviewText').value.trim();
            const stars = document.querySelectorAll('#ratingSelect .star.active');
            const rating = stars.length;

            if (!author || !text || rating === 0) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∏ –ø–æ—Å—Ç–∞–≤—å—Ç–µ –æ—Ü–µ–Ω–∫—É');
                return;
            }

            citiesData[cityName].reviews.push({ author, rating, text });
            updateCityRating(cityName);
            closeModal();
            renderCities();
            alert('–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–∑—ã–≤!');
        }

        function updateCityRating(cityName) {
            const reviews = citiesData[cityName].reviews;
            if (reviews.length === 0) return;
            
            const totalRating = reviews.reduce((sum, review) => sum + review.rating, 0);
            citiesData[cityName].rating = (totalRating / reviews.length).toFixed(1);
        }

        function closeModal() {
            document.getElementById('reviewModal').style.display = 'none';
        }

        // AI-–≥–∏–¥
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            const sendBtn = document.getElementById('sendBtn');

            if (!message) return;

            if (!apiConfig.OPENROUTER_API_KEY || apiConfig.OPENROUTER_API_KEY.trim() === '') {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å API –∫–ª—é—á–æ–º');
                return;
            }

            addMessage(message, 'user');
            input.value = '';
            sendBtn.disabled = true;

            const loadingMessage = addMessage('AI –¥—É–º–∞–µ—Ç...', 'ai');
            loadingMessage.classList.add('loading');

            try {
                const response = await fetch(apiConfig.API_URL, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiConfig.OPENROUTER_API_KEY}`,
                        'Content-Type': 'application/json',
                        'HTTP-Referer': window.location.origin,
                        'X-Title': '–ì–∏–¥–∏–∫ - AI-–ø—Ä–æ–≤–æ–¥–Ω–∏–∫'
                    },
                    body: JSON.stringify({
                        model: apiConfig.MODEL,
                        messages: [
                            {
                                role: "system",
                                content: `–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –≥–∏–¥ –ø–æ –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –†–æ—Å—Å–∏–∏. –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–æ—Ä–æ–¥–∞—Ö –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏:
${Object.entries(citiesData).map(([city, data]) =>
    `${city}: ${data.description}. –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: ${data.attractions.slice(0, 5).join(', ')}`
).join('\n\n')}

–û—Ç–≤–µ—á–∞–π –ø–æ–¥—Ä–æ–±–Ω–æ, –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ. –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –Ω–µ —Å–≤—è–∑–∞–Ω —Å –ò–≤–∞–Ω–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç—å—é, –≤–µ–∂–ª–∏–≤–æ –ø—Ä–µ–¥–ª–æ–∂–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ç–µ–º–µ —Ä–µ–≥–∏–æ–Ω–∞.`
                            },
                            { role: "user", content: message }
                        ],
                        max_tokens: 1000,
                        temperature: 0.7
                    })
                });

                loadingMessage.remove();

                if (response.ok) {
                    const result = await response.json();
                    const aiResponse = result.choices[0].message.content;
                    addMessage(aiResponse, 'ai');
                } else {
                    const error = await response.json();
                    addMessage(`–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: ${error.error?.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ API'}`, 'ai');
                }
            } catch (error) {
                loadingMessage.remove();
                addMessage(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'ai');
            } finally {
                sendBtn.disabled = false;
                input.focus();
            }
        }

        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            messageDiv.textContent = text;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            return messageDiv;
        }

        function handleKeyPress(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–∏–∑ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞)
        document.getElementById('routeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const city = document.getElementById('city').value;
            const interests = document.getElementById('interests').value;
            const time = document.getElementById('time').value;
            const budget = document.getElementById('budget').value;
            
            const cityNames = {
                ivanovo: "–ò–≤–∞–Ω–æ–≤–æ",
                shuya: "–®—É—è",
                kineshma: "–ö–∏–Ω–µ—à–º–∞",
                ples: "–ü–ª—ë—Å",
                palekh: "–ü–∞–ª–µ—Ö"
            };
            
            const interestsText = {
                history: "–ò—Å—Ç–æ—Ä–∏—è –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞",
                nature: "–ü—Ä–∏—Ä–æ–¥–∞ –∏ –ø–∞—Ä–∫–∏",
                culture: "–ö—É–ª—å—Ç—É—Ä–∞ –∏ –º—É–∑–µ–∏",
                religion: "–•—Ä–∞–º—ã –∏ –º–æ–Ω–∞—Å—Ç—ã—Ä–∏",
                gastronomy: "–ï–¥–∞ –∏ –∫–∞—Ñ–µ"
            };
            
            const budgetText = {
                free: "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ",
                low: "–ë—é–¥–∂–µ—Ç–Ω—ã–π (–¥–æ 500‚ÇΩ)",
                medium: "–°—Ä–µ–¥–Ω–∏–π (500-2000‚ÇΩ)",
                high: "–ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π (–æ—Ç 2000‚ÇΩ)"
            };
            
            const cityData = citiesData[cityNames[city]];
            let attractions = [];
            
            if (cityData) {
                attractions = cityData.attractions.slice(0, 3);
            }
            
            document.getElementById('routeContent').innerHTML = `
                <div style="padding: 1.5rem; background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(191, 219, 254, 0.3) 100%); border-radius: 15px; margin: 1rem 0;">
                    <strong>üìç –ì–æ—Ä–æ–¥:</strong> ${cityNames[city] || "–í—ã–±—Ä–∞–Ω–Ω—ã–π –≥–æ—Ä–æ–¥"}<br>
                    <strong>üéØ –ò–Ω—Ç–µ—Ä–µ—Å—ã:</strong> ${interestsText[interests] || interests}<br>
                    <strong>‚è±Ô∏è –í—Ä–µ–º—è:</strong> ${time} —á–∞—Å–∞<br>
                    <strong>üí∞ –ë—é–¥–∂–µ—Ç:</strong> ${budgetText[budget] || budget}
                </div>
                <div style="margin-top: 1.5rem;">
                    <h4>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –º–∞—Ä—à—Ä—É—Ç:</h4>
                    ${attractions.map((item, index) => 
                        `<div style="padding: 1rem; margin: 0.5rem 0; background: white; border-radius: 10px; border-left: 5px solid #8b5cf6;">
                            <strong>üìç –û—Å—Ç–∞–Ω–æ–≤–∫–∞ ${index + 1}:</strong> ${item}
                        </div>`
                    ).join('')}
                </div>
                <div style="margin-top: 1.5rem; padding: 1rem; background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%); border-radius: 10px;">
                    <strong>üí° –°–æ–≤–µ—Ç –æ—Ç AI-–≥–∏–¥–∞:</strong> –ù–∞—á–Ω–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç —É—Ç—Ä–æ–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ç–æ–ª–ø—ã. –ù–µ –∑–∞–±—É–¥—å—Ç–µ —É–¥–æ–±–Ω—É—é –æ–±—É–≤—å –∏ –≤–æ–¥—É.
                </div>
                <button class="btn" style="margin-top: 1.5rem; width: 100%;" onclick="showScreen('ai-guide')">
                    üó£Ô∏è –°–ø—Ä–æ—Å–∏—Ç—å —É AI-–≥–∏–¥–∞ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏
                </button>
            `;
            
            document.getElementById('routeResult').classList.add('show');
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            renderCities();
            updateConfigDisplay();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
            const savedConfig = localStorage.getItem('gidik_api_config');
            if (savedConfig) {
                try {
                    apiConfig = JSON.parse(savedConfig);
                    if (apiConfig.OPENROUTER_API_KEY) {
                        document.getElementById('apiConfigSection').style.display = 'block';
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:', error);
                }
            }
        });
    </script>
</body>
</html>
